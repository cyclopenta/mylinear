---
title: "tutorial"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{tutorial}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(qwzLinear)
```
## Introdction  
This package integrates the basic elements in the linear regression based on BIOSTAT650. The main function *mylm* will return a list of 5 items, They are:  
  
**results**: dataframe, with similar format with summary(lm)  
  
**residuals**: The residuals of the model  
  
**R.square**: The R^2 which demonstrate the percentage of variance in Y explained by the model  
  
**R.square.adj**: The adjusted of R^2  
  
**SSE**: The sum of square errors in the model  
  
Also, the function will automatically plot the *partial regression plots* for MLR and residual plot for SLR to test **"linearity"** assumption. $\hat{\epsilon}$ v.s. $\hat{Y}$ is also generated to test **"constant variance"** assumption"  
  
The example dataset named with "mydata" was generated from the reference below:  
  
**Morgenstern, Lewis B., et al. "Fatalism, optimism, spirituality, depressive symptoms, and stroke outcome: a population-based analysis." Stroke 42.12 (2011): 3518-3523.**
  
## Usage
The main fucntion in this package is **mylm** and **categorize**. The details of input could be found by using "help(mylm)" or â€œhelp(categorize)".  
  
**Using the internal dataset**  
```{r}
data(mydata)
dim(mydata)
```
**Basic MLR with/without model diagnose**  
```{r}
covar1 = c('Fatalism', 'Sex', 'R_E', 'Age')
t1 = mylm(mydata, 'Depression', covar1)
# check the result table 
t1$results
# could also fit a model without intercept and deactivate the diagnose function
t2 = mylm(mydata, 'Depression', covar1, intercept = FALSE, model.diag = FALSE)
t2$results
```
  
**Categorize variables into dummy variables **  
```{r}
tmp = categorize(mydata, c('R_E', 'NIHSS_4Cat'), ref = c(0,1))
# We get new dummy variables and the original columns were deleted
head(tmp[,52:55])
# We could also use cellmeans coding method 
tmp = categorize(mydata, c('R_E', 'NIHSS_4Cat'), method = 'cellmeans')
head(tmp[,52:56])
```
  
**Users could also directly add categorical variables in the mylm funciont**
```{r}
covar2 = c('Fatalism', 'Sex', 'R_E', 'Age_4Cat', 'NIHSS_4Cat')
covar3 = c('Fatalism', 'Sex', 'R_E', 'Age_4Cat')
t4 = mylm(mydata, 'Depression', covar2, category = c('Age_4Cat', 'NIHSS_4Cat'), ref = c(1,1))
t5 = mylm(mydata, 'Depression', covar3, category = c('Age_4Cat'), cat_method = 'cellmeans', intercept = F, model.diag = F)
```
```{r}
# The results for model with categorical variables
t4$results
t5$results
```

##Comparsion
```{r}
```
